% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/feat_lag_ma.R
\name{feat_lag_ma_dt}
\alias{feat_lag_ma_dt}
\title{Create Lag and Moving Average Features}
\usage{
feat_lag_ma_dt(
  df,
  date,
  target,
  p = NULL,
  q = NULL,
  groups = NULL,
  xreg = NULL,
  xreg_lags = NULL,
  xreg_ma = NULL
)
}
\arguments{
\item{df}{A data frame containing time series data}

\item{date}{Character string naming the date column}

\item{target}{Character string naming the target variable column}

\item{p}{Integer, number of target lags to create (e.g., p=12 creates lag_1 through lag_12)}

\item{q}{Integer vector, moving average window sizes for target (e.g., q=c(7,28))}

\item{groups}{Character vector naming grouping columns (e.g., c("store", "item"))}

\item{xreg}{Character vector naming exogenous variable columns to transform}

\item{xreg_lags}{Named list of lag specifications for exogenous variables
(e.g., list(price = c(1,7), promotion = c(0,1)))}

\item{xreg_ma}{Named list of MA window specifications for exogenous variables
(e.g., list(price = c(7,28)))}
}
\value{
Data frame with original columns plus new lag and MA features
}
\description{
Add lagged and moving average features for target and exogenous variables.
This function creates features suitable for time series modeling by computing
lags and rolling averages within groups.
}
\details{
Lags and MAs are computed within each group separately. The data is automatically
sorted by groups and date before computation. Use lag 0 in xreg_lags to include
the current value of an exogenous variable.
}
\examples{
\dontrun{
# Create 7 lags and 7-day MA for sales
df_feat <- feat_lag_ma_dt(df, date = "date", target = "sales",
                           p = 7, q = 7, groups = "store_id")

# Add exogenous variable features
df_feat <- feat_lag_ma_dt(df, date = "date", target = "sales",
                           p = 3, groups = "store_id",
                           xreg = "price",
                           xreg_lags = list(price = c(0, 1, 7)))
}
}
